# üß™ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–æ—Ç–∞

–î–æ–∫—É–º–µ–Ω—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–æ–¥–∏–ª–æ—Å—å –¥–æ –∏ –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –∫–æ–¥–∞.

---

## 1. –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã

**–î–æ:**

```python
def test_add():
    result = add(2, 3)
    assert result == 5
```

* –¢–µ—Å—Ç—ã –º–∏–Ω–∏–º–∞–ª—å–Ω—ã, –ø–æ–∫—Ä—ã—Ç–∏–µ <30%
* –û—à–∏–±–∫–∏ –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è

**–ü–æ—Å–ª–µ:**

```python
import pytest

@pytest.mark.asyncio
async def test_add_async():
    result = await add_async(2, 3)
    assert result == 5
```

* –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
* –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ —Å traceback
* –ü–æ–∫—Ä—ã—Ç–∏–µ >85%

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –Ω–∞–¥—ë–∂–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π

---

## 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

**–î–æ:**

* –ó–∞–ø—É—Å–∫–∞–ª–æ—Å—å –≤—Ä—É—á–Ω—É—é
* –û—à–∏–±–∫–∏ –≤—ã—è–≤–ª—è–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –Ω–∞ –ø—Ä–æ–¥–µ
* –ù–µ—Ç —Ñ–∏–∫—Ç–∏–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –±–∞–∑—ã

**–ü–æ—Å–ª–µ:**

```python
@pytest.mark.asyncio
async def test_send_message(bot, chat_id):
    response = await bot.send_message(chat_id, "test")
    assert response.status_code == 200
```

* –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ñ–∏–∫—Å—Ç—É—Ä—ã –∏ –º–æ–∫-–æ–±—ä–µ–∫—Ç—ã
* –û—à–∏–±–∫–∏ –≤—ã—è–≤–ª—è—é—Ç—Å—è –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ
* –í–Ω–µ–¥—Ä–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** —Å–æ–∫—Ä–∞—â–µ–Ω–æ –≤—Ä–µ–º—è –Ω–∞ –æ—Ç–ª–∞–¥–∫—É –∏ —Ä–∏—Å–∫ —Å–±–æ–µ–≤ –Ω–∞ –ø—Ä–æ–¥–µ

---

## 3. Load-—Ç–µ—Å—Ç—ã

**–î–æ:**

```bash
# –ü—Ä–æ—Å—Ç–µ–π—à–∏–π curl-—Å–∫—Ä–∏–ø—Ç
for i in {1..100}; do curl http://localhost:8000; done
```

* –ù–µ—Ç –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
* –û—à–∏–±–∫–∏ –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è

**–ü–æ—Å–ª–µ:**

```bash
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è locust
locust -f load_test.py
```

* –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å –∞–Ω–∞–ª–∏–∑–æ–º –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤
* –ü—Ä–æ–±–ª–µ–º—ã –≤—ã—è–≤–ª—è—é—Ç—Å—è –¥–æ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –±–æ—Ç —Å—Ç–∞–±–∏–ª–µ–Ω –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ

---

## 4. CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤

**–î–æ:** —Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
**–ü–æ—Å–ª–µ:** –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ GitHub Actions

```yaml
name: Run Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v4
        with:
          python-version: 3.11
      - run: pip install -r requirements.txt
      - run: pytest --maxfail=1 --disable-warnings -q
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** —Ç–µ—Å—Ç—ã –≤—Å–µ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø—Ä–∏ –∫–æ–º–º–∏—Ç–µ –∏ PR, –æ—à–∏–±–∫–∏ —Å—Ä–∞–∑—É –≤–∏–¥–Ω—ã

---

–≠—Ç–∏ –ø—Ä–∏–º–µ—Ä—ã –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—Ç, –∫–∞–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–≤—ã—à–∞–µ—Ç –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∏ –∫–∞—á–µ—Å—Ç–≤–æ –±–æ—Ç–∞.
